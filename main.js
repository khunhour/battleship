(()=>{var t={13:(t,e,r)=>{const a=r(113);t.exports=class{constructor(){this.board=this.createGrid(),this.allShips=[],this.createGrid()}createGrid(){this.board=[];for(let t=0;t<10;t++){this.board[t]=[];for(let e=0;e<10;e++)this.board[t].push({hasShip:"",isShot:!1})}}placeShip(t,e,r,o){let s=e,i=r;if(!this.checkShipPlacementValidity(t,s,i,o))return;const c=this.getShipId(),n=new a(t,c);this.allShips.push(n);for(let e=0;e<t;e++)this.board[s][i].hasShip=c,"vertical"===o?s++:i++}recieveAttack(t,e){if(!this.board[t][e].isShot&&(this.board[t][e].isShot=!0,this.checkHasShip(t,e))){const r=this.getAttackedShip(t,e);r.hit([t,e]),r.checkSunkState()}}checkShipPlacementValidity(t,e,r,a){let o=e,s=r;for(let e=0;e<t;e++){if(""!==this.board[o][s].hasShip)return!1;"vertical"===a?o++:"horizontal"===a&&s++}return!0}getShipId(){return this.allShips.length}checkHasShip(t,e){return""!==this.board[t][e].hasShip}getAttackedShip(t,e){const r=Number(this.board[t][e].hasShip);return this.allShips[r]}checkAllShipsAreSunk(){return this.allShips.filter((t=>t.isSunk)).length===this.allShips.length}}},926:(t,e,r)=>{const a=r(13);t.exports=class{constructor(t){this.name=t,this.gameboard=new a,this.moves=[],this.smartMoves=[]}attack(t,e,r){t.gameboard.recieveAttack(e,r)}}},113:t=>{t.exports=class{constructor(t,e){this.shipId=e,this.length=t,this.hits=[],this.isSunk=!1}hit(t){this.hits.push(t)}checkSunkState(){this.length===this.hits.length&&(this.isSunk=!0)}}}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}(()=>{"use strict";const t=(()=>{const t=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark")},e=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark")},r=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark")};return{createBoard:()=>{const t=document.getElementById("human-grid"),e=document.getElementById("computer-grid");for(let r=0;r<10;r++)for(let a=0;a<10;a++){const o=document.createElement("div");o.classList.add("tile"),o.dataset.row=r,o.dataset.col=a;const s=o.cloneNode();t.appendChild(s),e.appendChild(o)}},render:a=>{for(let o=0;o<10;o++)for(let s=0;s<10;s++)a.gameboard.board[o][s].isShot&&""!==a.gameboard.board[o][s].hasShip?t(a,o,s):a.gameboard.board[o][s].isShot&&""===a.gameboard.board[o][s].hasShip&&e(a,o,s),""!==a.gameboard.board[o][s].hasShip&&r(a,o,s)},declareWinner:t=>{const e=document.querySelector(".announcement");"computer"===t.name?e.textContent="You Lose!":e.textContent="You Won!"}}})(),e=r(926),a=(()=>{const r=new e(0),a=new e("computer"),o=t=>{t.gameboard.placeShip(5,0,0,"horizontal"),t.gameboard.placeShip(4,3,1,"vertical"),t.gameboard.placeShip(2,8,1,"horizontal"),t.gameboard.placeShip(2,8,8,"vertical"),t.gameboard.placeShip(2,2,9,"vertical")},s=(e,r)=>{(t=>{for(let e=0;e<t.gameboard.allShips.length;e++)if(!t.gameboard.allShips[e].isSunk)return!1;return!0})(r)&&t.declareWinner(e)},i=t=>{console.log("getRandomCoord");let e=`0${Math.floor(100*Math.random())}`;e=e.slice(-2);const r=e.split("").map(Number);return t.moves.includes(r)?i():(t.moves.push(r),r)};return{startGame:()=>{o(r),o(a),t.render(r),t.render(a)},startAttackRound:(e,o)=>{r.attack(a,e,o),t.render(a),s(r,a);const c=((t,e)=>{if(0===t.moves.length)return i(t);const r=t.moves[t.moves.length-1],a=r[0],o=r[1];if(console.log("coord"),console.log(a),console.log(o),""!==e.gameboard.board[a][o].hasShip)return((t,e)=>{console.log("getsmartCoord");const r=e[0],a=e[1],o=[[r,a+1],[r,a-1],[r+1,a],[r-1,a]];if(o.forEach((e=>{if(e[0]<0||e[0]>9||e[1]<0||e[1]>9){const t=o.indexOf(e);o.splice(t,1)}if(t.moves.includes(e)){const t=o.indexOf(e);o.splice(t,1)}})),o.forEach((e=>{t.smartMoves.push(e)})),console.log(t.smartMoves),0===o.length)return i();const s=t.smartMoves.shift();return t.moves.push(s),s})(t,[a,o]);if(0!==t.smartMoves.length){const e=t.smartMoves[0];return t.smartMoves.shift(),e}return i(t)})(a,r);a.attack(r,c[0],c[1]),t.render(r),s(a,r)}}})(),o={startButtonEvent:()=>{document.getElementById("start").addEventListener("click",(()=>{a.startGame(),document.querySelectorAll("#computer-grid .tile").forEach((t=>{t.addEventListener("click",(t=>{(t=>{console.log(t.target)})(t);const e=Number(t.target.dataset.row),r=Number(t.target.dataset.col);a.startAttackRound(e,r)}))}))}))}};t.createBoard(),o.startButtonEvent()})()})();