(()=>{var t={13:(t,e,r)=>{const a=r(113);t.exports=class{constructor(){this.board=this.createGrid(),this.allShips=[],this.createGrid()}createGrid(){this.board=[];for(let t=0;t<10;t++){this.board[t]=[];for(let e=0;e<10;e++)this.board[t].push({hasShip:"",isShot:!1})}}placeShip(t,e,r){let o=e[0],s=e[1];const i=this.getShipId(),n=new a(t,i);this.allShips.push(n);for(let e=0;e<t;e++)this.board[o][s].hasShip=i,"vertical"===r?o++:s++}recieveAttack(t,e){if(!this.board[t][e].isShot&&(this.board[t][e].isShot=!0,this.checkHasShip(t,e))){const r=this.getAttackedShip(t,e);r.hit([t,e]),r.checkSunkState()}}checkShipPlacementValidity(t,e,r,a){let o=e,s=r;for(let e=0;e<t;e++){if(""!==this.board[o][s].hasShip)return!1;"vertical"===a?o++:"horizontal"===a&&s++}return!0}getShipId(){return this.allShips.length}checkHasShip(t,e){return""!==this.board[t][e].hasShip}getAttackedShip(t,e){const r=Number(this.board[t][e].hasShip);return this.allShips[r]}checkAllShipsAreSunk(){return this.allShips.filter((t=>t.isSunk)).length===this.allShips.length}}},926:(t,e,r)=>{const a=r(13);t.exports=class{constructor(t){this.name=t,this.gameboard=new a,this.moves=[],this.smartMoves=[]}attack(t,e,r){t.gameboard.recieveAttack(e,r)}}},113:t=>{t.exports=class{constructor(t,e){this.shipId=e,this.length=t,this.hits=[],this.isSunk=!1}hit(t){this.hits.push(t)}checkSunkState(){this.length===this.hits.length&&(this.isSunk=!0)}}}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}(()=>{"use strict";const t=(()=>{const t=(t,e)=>{const r=JSON.stringify(e);return t.some((t=>JSON.stringify(t)===r))},e=r=>{console.log("getRandomCoord");let a=`0${Math.floor(100*Math.random())}`;a=a.slice(-2);const o=a.split("").map(Number);return t(r.moves,o)?e(r):(r.moves.push(o),o)};return{getCoord:t=>{if(0!==t.smartMoves.length){const e=t.smartMoves[0];return t.moves.push(e),t.smartMoves.shift(),e}return e(t)},calculateNextBestCoord:(e,r,a)=>{const o=a[0],s=a[1];if(""===r.gameboard.board[o][s].hasShip)return;const i=[[o,s+1],[o,s-1],[o+1,s],[o-1,s]];i.slice().forEach((r=>{if(console.log(r),console.log("forEach"),r[0]<0||r[0]>9||r[1]<0||r[1]>9){console.log("minus outside range");const t=i.findIndex((t=>JSON.stringify(t)===JSON.stringify(r)));i.splice(t,1)}if(t(e.moves,r)){console.log("already played");const t=i.findIndex((t=>JSON.stringify(t)===JSON.stringify(r)));i.splice(t,1)}})),i.forEach((t=>{e.smartMoves.push(t)}))}}})(),e=(()=>{const t=(e,r,a)=>{let o,s;return"horizontal"===a?(o=Math.floor(10*Math.random()),s=Math.floor(Math.random()*(10-r))):(o=Math.floor(Math.random()*(10-r)),s=Math.floor(10*Math.random())),((t,e,r,a)=>{let o=!1,s=e[0],i=e[1];for(let e=0;e<r;e++)""!==t.gameboard.board[s][i].hasShip&&(o=!0,console.log("hi")),"horizontal"===a?i++:s++;return o})(e,[o,s],r,a)?t(e,r,a):[o,s]};return{placeShipRandomly:e=>{const r=["horizontal","vertical"][Math.floor(2*Math.random())];[5,4,3,2,2,1].forEach((a=>{const o=t(e,a,r);e.gameboard.placeShip(a,o,r)}))}}})(),a=(()=>{const t=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark")},e=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark")},r=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark")},a=t=>{const e=t.gameboard.allShips.filter((t=>!1===t.isSunk));document.querySelector(`.${t.name}-side .ship-num`).textContent=`Ships Remaining: ${e.length}`};return{createBoard:()=>{const t=document.getElementById("human-grid"),e=document.getElementById("computer-grid");for(let r=0;r<10;r++)for(let a=0;a<10;a++){const o=document.createElement("div");o.classList.add("tile"),o.dataset.row=r,o.dataset.col=a;const s=o.cloneNode();t.appendChild(s),e.appendChild(o)}},render:o=>{for(let a=0;a<10;a++)for(let s=0;s<10;s++)o.gameboard.board[a][s].isShot&&""!==o.gameboard.board[a][s].hasShip?t(o,a,s):o.gameboard.board[a][s].isShot&&""===o.gameboard.board[a][s].hasShip&&e(o,a,s),"human"===o.name&&""!==o.gameboard.board[a][s].hasShip&&r(o,a,s);a(o)},declareWinner:t=>{const e=document.querySelector(".announcement");"computer"===t.name?e.textContent="You Lose!":e.textContent="You Won!"},updateRemainingShip:a}})(),o=r(926),s=(()=>{const r=new o("human"),s=new o("computer"),i=(t,e)=>{(t=>{for(let e=0;e<t.gameboard.allShips.length;e++)if(!t.gameboard.allShips[e].isSunk)return!1;return!0})(e)&&a.declareWinner(t)};return{startGame:()=>{e.placeShipRandomly(r),e.placeShipRandomly(s),a.render(r)},startAttackRound:(e,o)=>{r.attack(s,e,o),a.render(s),i(r,s);const n=t.getCoord(s,r);t.calculateNextBestCoord(s,r,n),s.attack(r,n[0],n[1]),a.render(r),i(s,r),console.log(JSON.stringify(s.moves)),console.log(JSON.stringify(s.smartMoves))}}})(),i=()=>{document.getElementById("start").addEventListener("click",(()=>{s.startGame(),document.querySelectorAll("#computer-grid .tile").forEach((t=>{t.addEventListener("click",(t=>{const e=Number(t.target.dataset.row),r=Number(t.target.dataset.col);s.startAttackRound(e,r)}))}))}))};a.createBoard(),i()})()})();