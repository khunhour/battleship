(()=>{var t={13:(t,e,r)=>{const a=r(113);t.exports=class{constructor(){this.board=this.createGrid(),this.allShips=[],this.createGrid()}createGrid(){this.board=[];for(let t=0;t<10;t++){this.board[t]=[];for(let e=0;e<10;e++)this.board[t].push({hasShip:"",isShot:!1})}}placeShip(t,e,r,o){let s=e,i=r;if(!this.checkShipPlacementValidity(t,s,i,o))return;const c=this.getShipId(),n=new a(t,c);this.allShips.push(n);for(let e=0;e<t;e++)this.board[s][i].hasShip=c,"vertical"===o?s++:i++}recieveAttack(t,e){if(!this.board[t][e].isShot&&(this.board[t][e].isShot=!0,this.checkHasShip(t,e))){const r=this.getAttackedShip(t,e);r.hit([t,e]),r.checkSunkState()}}checkShipPlacementValidity(t,e,r,a){let o=e,s=r;for(let e=0;e<t;e++){if(""!==this.board[o][s].hasShip)return!1;"vertical"===a?o++:"horizontal"===a&&s++}return!0}getShipId(){return this.allShips.length}checkHasShip(t,e){return""!==this.board[t][e].hasShip}getAttackedShip(t,e){const r=Number(this.board[t][e].hasShip);return this.allShips[r]}checkAllShipsAreSunk(){return this.allShips.filter((t=>t.isSunk)).length===this.allShips.length}}},926:(t,e,r)=>{const a=r(13);t.exports=class{constructor(t){this.name=t,this.gameboard=new a,this.moves=[],this.smartMoves=[]}attack(t,e,r){t.gameboard.recieveAttack(e,r)}}},113:t=>{t.exports=class{constructor(t,e){this.shipId=e,this.length=t,this.hits=[],this.isSunk=!1}hit(t){this.hits.push(t)}checkSunkState(){this.length===this.hits.length&&(this.isSunk=!0)}}}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}(()=>{"use strict";const t=(()=>{const t=(t,e)=>{const r=JSON.stringify(e);return t.some((t=>JSON.stringify(t)===r))},e=r=>{console.log("getRandomCoord");let a=`0${Math.floor(100*Math.random())}`;a=a.slice(-2);const o=a.split("").map(Number);return t(r.moves,o)?e(r):(r.moves.push(o),o)};return{getCoord:(t,r)=>{if(0===t.moves.length)return e(t);if(0!==t.smartMoves.length){const e=t.smartMoves[0];return t.moves.push(e),t.smartMoves.shift(),e}return e(t)},calculateNextBestCoord:(e,r,a)=>{const o=a[0],s=a[1];if(""===r.gameboard.board[o][s].hasShip)return;const i=[[o,s+1],[o,s-1],[o+1,s],[o-1,s]];i.slice().forEach((r=>{if(console.log(r),console.log("forEach"),r[0]<0||r[0]>9||r[1]<0||r[1]>9){console.log("minus outside range");const t=i.findIndex((t=>JSON.stringify(t)===JSON.stringify(r)));i.splice(t,1)}if(t(e.moves,r)){console.log("already played");const t=i.findIndex((t=>JSON.stringify(t)===JSON.stringify(r)));console.log(t),console.log(i[t]),i.splice(t,1)}})),i.forEach((t=>{e.smartMoves.push(t)}))}}})(),e=(()=>{const t=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark")},e=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark")},r=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark")};return{createBoard:()=>{const t=document.getElementById("human-grid"),e=document.getElementById("computer-grid");for(let r=0;r<10;r++)for(let a=0;a<10;a++){const o=document.createElement("div");o.classList.add("tile"),o.dataset.row=r,o.dataset.col=a;const s=o.cloneNode();t.appendChild(s),e.appendChild(o)}},render:a=>{for(let o=0;o<10;o++)for(let s=0;s<10;s++)a.gameboard.board[o][s].isShot&&""!==a.gameboard.board[o][s].hasShip?t(a,o,s):a.gameboard.board[o][s].isShot&&""===a.gameboard.board[o][s].hasShip&&e(a,o,s),""!==a.gameboard.board[o][s].hasShip&&r(a,o,s)},declareWinner:t=>{const e=document.querySelector(".announcement");"computer"===t.name?e.textContent="You Lose!":e.textContent="You Won!"}}})(),a=r(926),o=(()=>{const r=new a(0),o=new a("computer"),s=t=>{t.gameboard.placeShip(5,0,0,"horizontal"),t.gameboard.placeShip(4,3,1,"vertical"),t.gameboard.placeShip(2,8,1,"horizontal"),t.gameboard.placeShip(2,8,8,"vertical"),t.gameboard.placeShip(2,2,9,"vertical")},i=(t,r)=>{(t=>{for(let e=0;e<t.gameboard.allShips.length;e++)if(!t.gameboard.allShips[e].isSunk)return!1;return!0})(r)&&e.declareWinner(t)};return{startGame:()=>{s(r),s(o),e.render(r),e.render(o)},startAttackRound:(a,s)=>{r.attack(o,a,s),e.render(o),i(r,o);const c=t.getCoord(o,r);t.calculateNextBestCoord(o,r,c),o.attack(r,c[0],c[1]),e.render(r),i(o,r),console.log(JSON.stringify(o.moves)),console.log(JSON.stringify(o.smartMoves))}}})(),s=()=>{document.getElementById("start").addEventListener("click",(()=>{o.startGame(),document.querySelectorAll("#computer-grid .tile").forEach((t=>{t.addEventListener("click",(t=>{const e=Number(t.target.dataset.row),r=Number(t.target.dataset.col);o.startAttackRound(e,r)}))}))}))};e.createBoard(),s()})()})();