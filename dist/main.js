(()=>{var t={13:(t,e,r)=>{const a=r(113);t.exports=class{constructor(){this.board=this.createGrid(),this.allShips=[],this.createGrid()}createGrid(){this.board=[];for(let t=0;t<10;t++){this.board[t]=[];for(let e=0;e<10;e++)this.board[t].push({hasShip:"",isShot:!1})}}placeShip(t,e,r,s){let o=e,i=r;if(!this.checkShipPlacementValidity(t,o,i,s))return;const c=this.getShipId(),n=new a(t,c);this.allShips.push(n);for(let e=0;e<t;e++)this.board[o][i].hasShip=c,"vertical"===s?o++:i++}recieveAttack(t,e){if(!this.board[t][e].isShot&&(this.board[t][e].isShot=!0,this.checkHasShip(t,e))){const r=this.getAttackedShip(t,e);r.hit([t,e]),r.checkSunkState()}}checkShipPlacementValidity(t,e,r,a){let s=e,o=r;for(let e=0;e<t;e++){if(""!==this.board[s][o].hasShip)return!1;"vertical"===a?s++:"horizontal"===a&&o++}return!0}getShipId(){return this.allShips.length}checkHasShip(t,e){return""!==this.board[t][e].hasShip}getAttackedShip(t,e){const r=Number(this.board[t][e].hasShip);return this.allShips[r]}checkAllShipsAreSunk(){return this.allShips.filter((t=>t.isSunk)).length===this.allShips.length}}},926:(t,e,r)=>{const a=r(13);t.exports=class{constructor(t){this.name=t,this.gameboard=new a,this.moves=[],this.smartMoves=[]}attack(t,e,r){t.gameboard.recieveAttack(e,r)}}},113:t=>{t.exports=class{constructor(t,e){this.shipId=e,this.length=t,this.hits=[],this.isSunk=!1}hit(t){this.hits.push(t)}checkSunkState(){this.length===this.hits.length&&(this.isSunk=!0)}}}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,r),o.exports}(()=>{"use strict";const t=(()=>{const t=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("red-mark")},e=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("missed-mark")},r=(t,e,r)=>{"computer"===t.name?document.querySelector(`#computer-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark"):document.querySelector(`#human-grid [data-row="${e}"][data-col="${r}"]`).classList.add("ship-mark")};return{createBoard:()=>{const t=document.getElementById("human-grid"),e=document.getElementById("computer-grid");for(let r=0;r<10;r++)for(let a=0;a<10;a++){const s=document.createElement("div");s.classList.add("tile"),s.dataset.row=r,s.dataset.col=a;const o=s.cloneNode();t.appendChild(o),e.appendChild(s)}},render:a=>{for(let s=0;s<10;s++)for(let o=0;o<10;o++)a.gameboard.board[s][o].isShot&&""!==a.gameboard.board[s][o].hasShip?t(a,s,o):a.gameboard.board[s][o].isShot&&""===a.gameboard.board[s][o].hasShip&&e(a,s,o),""!==a.gameboard.board[s][o].hasShip&&r(a,s,o)},declareWinner:t=>{const e=document.querySelector(".announcement");"computer"===t.name?e.textContent="You Lose!":e.textContent="You Won!"}}})(),e=r(926),a=(()=>{const r=new e(0),a=new e("computer"),s=t=>{t.gameboard.placeShip(5,0,0,"horizontal"),t.gameboard.placeShip(4,3,1,"vertical"),t.gameboard.placeShip(2,8,1,"horizontal"),t.gameboard.placeShip(2,8,8,"vertical"),t.gameboard.placeShip(2,2,9,"vertical")},o=(e,r)=>{(t=>{for(let e=0;e<t.gameboard.allShips.length;e++)if(!t.gameboard.allShips[e].isSunk)return!1;return!0})(r)&&t.declareWinner(e)},i=(t,e)=>{const r=JSON.stringify(e);return t.some((t=>JSON.stringify(t)===r))},c=t=>{console.log("getRandomCoord");let e=`0${Math.floor(100*Math.random())}`;e=e.slice(-2);const r=e.split("").map(Number);return i(t.moves,r)?c(t):(t.moves.push(r),r)};return{startGame:()=>{s(r),s(a),t.render(r),t.render(a)},startAttackRound:(e,s)=>{r.attack(a,e,s),t.render(a),o(r,a);const n=((t,e)=>{if(0===t.moves.length)return c(t);const r=t.moves[t.moves.length-1],a=r[0],s=r[1];if(""!==e.gameboard.board[a][s].hasShip)return((t,e)=>{console.log("getsmartCoord");const r=e[0],a=e[1],s=[[r,a+1],[r,a-1],[r+1,a],[r-1,a]];if(s.forEach((e=>{if(e[0]<0||e[0]>9||e[1]<0||e[1]>9){const t=s.indexOf(e);s.splice(t,1)}if(i(t.moves,e)){const t=s.indexOf(e);console.log(s[t]),s.splice(t,1)}})),s.forEach((e=>{t.smartMoves.push(e)})),console.log(t.smartMoves),0===s.length)return c();const o=t.smartMoves.shift();return t.moves.push(o),o})(t,[a,s]);if(0!==t.smartMoves.length){const e=t.smartMoves[0];return t.moves.push(e),t.smartMoves.shift(),e}return c(t)})(a,r);a.attack(r,n[0],n[1]),t.render(r),o(a,r),console.log(JSON.stringify(a.moves)),console.log(JSON.stringify(a.smartMoves))}}})(),s=()=>{document.getElementById("start").addEventListener("click",(()=>{a.startGame(),document.querySelectorAll("#computer-grid .tile").forEach((t=>{t.addEventListener("click",(t=>{const e=Number(t.target.dataset.row),r=Number(t.target.dataset.col);a.startAttackRound(e,r)}))}))}))};t.createBoard(),s()})()})();